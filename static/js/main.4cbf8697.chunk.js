(this["webpackJsonpcommunication-survey"]=this["webpackJsonpcommunication-survey"]||[]).push([[0],{100:function(e,t,n){},110:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(30),i=n.n(r),s=(n(97),n(44)),u=n.n(s),o=n(66),l=n(31),j=n(10),d=(n(99),n(156)),b=n(159),h=n(160),f=n(155),O=n(76),v=n.n(O),p=n(77),x=n(158),m=n(78),g=(n(100),n(2)),y=["children","name"];function k(e){var t=e.time,n=e.evaluatee,a=e.result,r=e.setPersonResult,i=c.a.useRef({}),s={F:{text:"Frontliners",color:"#0078D7",gc:"1/2",gr:"1/2"},C:{text:"Content",color:"#F7630C",gc:"1/2",gr:"2/3"},S:{text:"Corp Sec",color:"#68768A",gc:"2/3",gr:"1/3"},I:{text:"Infrastructure",color:"#10893E",gc:"1/3",gr:"3/4"}},u=c.a.useCallback((function(e){for(var a=0,c=Object.keys(s);a<c.length;a++){var u=c[a];u!==e&&i.current[u].classList.remove("highlight")}i.current[e].classList.add("highlight"),r(n,t,e)}),[n,t,r]),o=c.a.forwardRef((function(e,n){var c=e.children,r=e.name,i=Object(m.a)(e,y);return Object(g.jsx)("div",Object(l.a)(Object(l.a)({},i),{},{ref:n,className:"".concat(r," ").concat(r===a[t]?"highlight":""),onClick:function(){return u(r)},children:c}))}));return Object(g.jsx)("div",{className:"boxes",children:Object.entries(s).map((function(e,t){return Object(g.jsx)(o,{name:e[0],ref:function(t){return i.current[e[0]]=t},style:{backgroundColor:e[1].color+"99",gridColumn:e[1].gc,gridRow:e[1].gr},children:e[1].text},"box".concat(t))}))})}var C="https://artt-survey.herokuapp.com";var S=function(){var e=c.a.useState({}),t=Object(j.a)(e,2),n=t[0],a=t[1],r=c.a.useState(""),i=Object(j.a)(r,2),s=i[0],O=i[1],m=c.a.useState(""),y=Object(j.a)(m,2),S=y[0],w=y[1],N=c.a.useState([]),F=Object(j.a)(N,2),E=F[0],J=F[1],I=c.a.useState(!1),L=Object(j.a)(I,2),D=L[0],R=L[1],T=c.a.useState(!1),q=Object(j.a)(T,2),P=q[0],z=q[1],A=c.a.useState(!1),B=Object(j.a)(A,2),M=B[0],W=B[1],H=c.a.useState(""),G=Object(j.a)(H,2),K=G[0],Q=G[1],U=Object(p.a)({typography:{fontFamily:'"Mali"'},palette:{mode:"dark"}});function V(e){if(!e.result)return null;var t=n[e.evaluatee].name;return S===e.evaluatee&&(t="\u0e04\u0e38\u0e13"),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"qtitle",children:["\u0e04\u0e38\u0e13\u0e04\u0e34\u0e14\u0e27\u0e48\u0e32\u0e07\u0e32\u0e19",Object(g.jsx)("span",{className:"colorize",children:t}),"\u0e2d\u0e22\u0e32\u0e01\u0e17\u0e33\u0e07\u0e32\u0e19\u0e43\u0e19\u0e01\u0e25\u0e48\u0e2d\u0e07\u0e44\u0e2b\u0e19"]}),e.isOptional&&Object(g.jsx)(b.a,{onClick:function(){return t=e.evaluatee,void J(E.filter((function(e){return e.evaluatee!==t})));var t},color:"secondary",children:"\u0e25\u0e1a\u0e0a\u0e37\u0e48\u0e2d\u0e2d\u0e2d\u0e01"}),Object(g.jsxs)("div",{className:"boxbox",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("p",{children:"\u0e43\u0e19\u0e15\u0e2d\u0e19\u0e19\u0e35\u0e49"}),Object(g.jsx)(k,Object(l.a)({time:"now"},e))]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("p",{children:"\u0e43\u0e19\u0e2d\u0e35\u0e01 3\u20135 \u0e1b\u0e35"}),Object(g.jsx)(k,Object(l.a)({time:"future"},e))]})]})]})}function X(){return Object(g.jsx)("div",{className:"question",children:Object(g.jsx)(f.a,{autoHighlight:!0,id:"combo-box-demo",options:Object.entries(n).filter((function(e){return!E.map((function(e){return e.evaluatee})).includes(e[0])})).map((function(e){return{label:e[1].name,id:e[0]}})),renderInput:function(e){return Object(g.jsx)(d.a,Object(l.a)(Object(l.a)({},e),{},{label:"\u0e04\u0e49\u0e19\u0e2b\u0e32\u0e0a\u0e37\u0e48\u0e2d \u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e04\u0e19\u0e2d\u0e37\u0e48\u0e19 \u0e46 (optional)",size:"small"}))},onChange:function(e,t){return function(e){var t=JSON.parse(JSON.stringify(E));t.push({evaluatee:e,now:"",future:""}),J(t)}(t.id)}})})}function Y(){return(Y=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/checkuser"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s,hash:window.location.search.slice(1)})});case 2:if(200===e.sent.status){e.next=6;break}return alert("\u0e23\u0e2b\u0e31\u0e2a\u0e1e\u0e19\u0e31\u0e01\u0e07\u0e32\u0e19\u0e44\u0e21\u0e48\u0e15\u0e23\u0e07\u0e01\u0e31\u0e1a\u0e25\u0e34\u0e07\u0e04\u0e4c"),e.abrupt("return");case 6:if(Object.keys(n).includes(s)){e.next=9;break}return alert("\u0e01\u0e23\u0e38\u0e13\u0e32\u0e15\u0e23\u0e27\u0e08\u0e2a\u0e2d\u0e1a\u0e23\u0e2b\u0e31\u0e2a\u0e1e\u0e19\u0e31\u0e01\u0e07\u0e32\u0e19\u0e2d\u0e35\u0e01\u0e04\u0e23\u0e31\u0e49\u0e07"),e.abrupt("return");case 9:w(s);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),t=E.map((function(e,t){return{Timestamp:(new Date).toString(),EvaluatorID:S,EvaluateeID:e.evaluatee,Now:e.now,Future:e.future,Comment:0===t?K:""}})),e.next=4,fetch("".concat(C,"/submit"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){200===e.status&&R(!0)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t,n){for(var a=JSON.parse(JSON.stringify(E)),c=0;c<a.length;c++)if(a[c].evaluatee===e){a[c][t]=n;break}console.log(a),J(a)}return c.a.useEffect((function(){if(Object.keys(n).length>0&&""!==S){var e=[],t=[S];n[S].evalList&&(t=t.concat(n[S].evalList)),t.forEach((function(t){e.push({evaluatee:t,now:"",future:""})})),J(e)}}),[n,S]),c.a.useEffect((function(){Object.keys(n).length>0&&console.log("Data loaded")}),[n]),c.a.useEffect((function(){fetch("".concat(C,"/alldata")).then((function(e){return e.json()})).then((function(e){a(e)}))}),[]),c.a.useEffect((function(){W(!!E&&E.every((function(e){return""!==e.now&&""!==e.future})))}),[E]),Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(x.a,{theme:U,children:Object(g.jsx)("header",{className:"App-header",children:D?Object(g.jsx)("div",{children:"\u0e02\u0e2d\u0e1a\u0e04\u0e38\u0e13\u0e04\u0e23\u0e31\u0e1a \u0e40\u0e23\u0e32\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e04\u0e33\u0e15\u0e2d\u0e1a\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13\u0e41\u0e25\u0e49\u0e27"}):Object(g.jsx)(g.Fragment,{children:S&&E?Object(g.jsxs)("div",{className:"page",children:[Object(g.jsxs)("h2",{children:["\u0e2a\u0e27\u0e31\u0e2a\u0e14\u0e35\u0e04\u0e23\u0e31\u0e1a\u0e04\u0e38\u0e13",n[S].name,"!"]}),E.map((function(e,t){var a=e.evaluatee!==S&&!n[S].evalList.includes(e.evaluatee);return Object(g.jsx)("div",{className:"question ".concat(a?"optional":""),children:Object(g.jsx)(V,{evaluatee:e.evaluatee,result:e,setPersonResult:$,isOptional:a})},"q".concat(t))})),Object(g.jsx)(X,{}),Object(g.jsx)("div",{style:{maxWidth:"600px",margin:"40px auto"},children:Object(g.jsx)(d.a,{label:"\u0e04\u0e27\u0e32\u0e21\u0e01\u0e31\u0e07\u0e27\u0e25 \u0e04\u0e27\u0e32\u0e21\u0e40\u0e2b\u0e47\u0e19 \u0e02\u0e49\u0e2d\u0e40\u0e2a\u0e19\u0e2d\u0e41\u0e19\u0e30",fullWidth:!0,multiline:!0,rows:4,value:K,onChange:function(e){return Q(e.target.value)}})}),Object(g.jsx)("div",{children:Object(g.jsx)(b.a,{variant:"contained",onClick:function(){return Z.apply(this,arguments)},disabled:!M||P,children:"\u0e2a\u0e48\u0e07\u0e04\u0e33\u0e15\u0e2d\u0e1a"})})]}):Object(g.jsxs)("div",{children:[Object(g.jsx)("p",{children:"\u0e42\u0e1b\u0e23\u0e14\u0e23\u0e30\u0e1a\u0e38\u0e23\u0e2b\u0e31\u0e2a\u0e1e\u0e19\u0e31\u0e01\u0e07\u0e32\u0e19\u0e02\u0e2d\u0e07\u0e17\u0e48\u0e32\u0e19"}),Object(g.jsxs)("div",{children:[Object(g.jsx)(d.a,{id:"outlined-basic",label:"\u0e23\u0e2b\u0e31\u0e2a\u0e1e\u0e19\u0e31\u0e01\u0e07\u0e32\u0e19",variant:"outlined",size:"small",value:s,onChange:function(e){return O(e.target.value)}}),Object(g.jsx)(h.a,{"aria-label":"go",onClick:function(){return Y.apply(this,arguments)},disabled:0===Object.keys(n).length,children:Object(g.jsx)(v.a,{})})]})]})})})})})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,162)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(S,{})}),document.getElementById("root")),w()},97:function(e,t,n){},99:function(e,t,n){}},[[110,1,2]]]);
//# sourceMappingURL=main.4cbf8697.chunk.js.map